# 🌟 인공지능 무인운반차량(AGV) 시스템 개발 프로젝트 경험 🌟

인공지능 기반 무인운반차량(AGV) 시스템 개발 프로젝트에 참여하며, 다양한 핵심 기술을 직접 구현하고 통합하는 값진 경험을 쌓았습니다. 이 프로젝트를 통해 실제 시스템 개발 프로세스를 이해하고, 문제 해결 능력과 협업 역량을 크게 향상시킬 수 있었습니다.

---

### 1. 프로젝트 개요: 스마트 AGV 제어 및 데이터 분석 시스템 구축 💡

이 프로젝트는 AGV의 자율 주행, 센서 데이터 수집 및 관리, 그리고 OpenAI GPT를 활용한 데이터 분석 및 시각화 기능을 통합하는 스마트 시스템을 구축하는 것을 목표로 했습니다. 저는 이 과정에서 AGV의 효율적인 제어와 운영을 위한 백엔드 로직 및 사용자 인터페이스 개발에 기여했습니다.

---

### 2. 주요 기능 및 제가 기여한 부분 💪

#### 2.1. AGV 제어 시스템 개발
저는 AGV의 안정적인 작동을 위한 핵심 제어 로직과 통신 모듈을 구축하는 데 집중했습니다.

* **MQTT 통신 구현**: AGV와 원격 제어기 간의 실시간 명령 및 센싱 데이터 교환을 위해 MQTT 프로토콜을 활용했습니다.
    * `agv/command` 토픽을 통해 AGV에 수동/자동 명령을 발행하고, `agv/sensing` 토픽을 통해 AGV의 실시간 상태를 수신하도록 구현했습니다.
    * 이를 통해 원격에서 AGV를 제어하고 상태를 모니터링할 수 있는 기반을 마련했습니다.

* **수동/자동 제어 로직**: 사용자 명령(`go`, `back`, `left`, `right`, `stop`, `mid`)에 따라 AGV를 직접 제어하거나, `auto_start` 및 `auto_stop` 명령으로 자율 주행 모드를 전환하는 기능을 구현했습니다.

* **자율주행 (Road Following) 및 충돌 회피**:
    * `jetbot.robot` 및 `jetbot.camera` 라이브러리를 활용하여 AGV의 로봇 및 카메라를 제어했습니다.
    * 미리 학습된 모델(`best_steering_model_xy_test.pth`)을 기반으로 자율 주행(Road Following) 기능을 구현했습니다.
    * 주행 중 실시간 거리 센서 데이터를 활용하여 거리가 일정 임계값(예: 30cm) 이하일 경우 자동으로 AGV를 정지시켜 충돌을 회피하는 안전 로직을 적용했습니다.

#### 2.2. 센서 데이터 관리 및 분석
AGV가 수집하는 다양한 센서 데이터를 효율적으로 관리하고 활용하는 시스템을 구축했습니다.

* **Firebase 연동**: Google Firebase Realtime Database (RTDB)와 Firestore를 모두 활용하여 센서 데이터 및 로그를 관리했습니다.
    * **RTDB**: 실시간 거리, 습도, 온도 데이터를 가져오는 데 사용했습니다.
    * **Firestore**: AGV 상태, 충돌 감지 여부, 시간 등의 로그 데이터를 기록했습니다.
    * 안전한 서비스 계정 키(`AGVprojectFirebase.json`, `mid-pjt-fec47-firebase-adminsdk-fbsvc-ff433d1b6e.json`)를 통해 Firebase에 안전하게 접근하도록 구성했습니다.

* **센싱 스레드**: 별도의 `SensingThread`를 생성하여 주기적으로(예: 1초 간격) 온도, 습도, 거리 데이터를 수집하고, 이를 Firestore에 업로드하며, MQTT를 통해 실시간으로 발행하도록 구현했습니다.

* **색상 영역 인식 (Color Area Detection)**: `ColorAreaDetector` 스레드를 통해 카메라 이미지에서 미리 정의된 색상(빨강, 파랑 등)을 인식하고, 관련 센서 데이터를 수집하도록 구현했습니다.

#### 2.3. 인공지능 통합 및 활용
OpenAI API를 시스템에 통합하여, AGV 데이터에 대한 고급 분석 및 시각화 기능을 제공했습니다.

* **OpenAI API 연동**: `openai` 라이브러리를 사용하여 OpenAI GPT 모델과 통신하는 클라이언트를 초기화했습니다.

* **로그 데이터 분석 및 시각화 코드 생성**:
    * 사용자가 입력한 프롬프트와 Firestore에서 가져온 AGV 로그 데이터를 GPT에 전송하여, 데이터를 분석하고 인사이트를 제공하도록 구현했습니다.
    * 특히, "시각화", "차트", "그래프"와 같은 키워드가 감지되면, GPT가 `Matplotlib`와 `Pandas`를 사용하여 해당 데이터를 시각화하는 Python 코드를 생성하도록 요청했습니다.
    * 생성된 코드를 `exec()`를 통해 실행하여 GUI에 차트를 표시하는 기능을 개발했으며, 이 과정에서 `exec()` 함수의 보안 이슈에 대해 고민하는 계기가 되었습니다.

#### 2.4. GUI 및 사용자 경험 개선
사용자가 AGV를 직관적으로 제어하고 데이터를 쉽게 확인할 수 있도록 GUI를 개발했습니다.

* **PySide2 기반 원격 제어 GUI**: `PySide2.QtWidgets` 라이브러리를 사용하여 AGV의 상태 로깅, 센싱 데이터 표시, GPT 분석 결과를 보여주는 데스크톱 GUI를 구축했습니다. 한글 폰트가 깨지지 않도록 설정하는 세심한 부분까지 고려했습니다.

* **Jupyter Widgets 기반 제어 UI**: `ipywidgets`를 활용하여 Jupyter 환경에서도 AGV를 제어하고 센싱 데이터를 시각적으로 확인할 수 있는 UI를 구성했습니다. 이는 개발 및 테스트 단계에서 빠른 피드백을 얻는 데 중요한 역할을 했습니다.

---

### 3. 배운 점 및 기여 ✨

이 프로젝트를 통해 저는 Python 프로그래밍 역량은 물론, **MQTT, Firebase, OpenAI API 연동** 등 다양한 외부 서비스 통합 능력을 크게 향상시켰습니다. 특히, 복잡한 시스템을 모듈화하고 스레드를 활용하여 동시성을 관리하는 방법을 실제 프로젝트에 적용하며 깊이 있게 이해할 수 있었습니다.

또한, 사용자 친화적인 GUI를 개발하고 AI를 활용하여 데이터에 대한 실행 가능한 통찰력을 제공하는 과정에서 문제 해결 능력과 창의적 사고를 발휘할 수 있었습니다. AGV 시스템 개발 경험을 바탕으로, 저는 앞으로도 끊임없이 배우고 도전하며, 기술 발전에 기여하는 개발자로 성장하고 싶습니다. 감사합니다.
